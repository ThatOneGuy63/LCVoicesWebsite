!function(){var e={declare:{type:"textbox",default:{}},properties:{text:{type:"string",visible:!0,readonly:!1,defaultValue:""},className:{type:"string",visible:!0,readonly:!1,defaultValue:""},dataField:{type:"string",visible:!0,readonly:!1,defaultValue:""},outputFormat:{type:"string",visible:!0,readonly:!1,defaultValue:""},fontName:{type:"string",visible:!0,readonly:!1,defaultValue:"",link:"style.Font.Name"},fontSize:{type:"string",visible:!0,readonly:!1,defaultValue:"",link:"style.Font.Size"},fontWeight:{type:"string",visible:!0,readonly:!1,defaultValue:"",link:"style.Font.Weight"},fontStyle:{type:"string",visible:!0,readonly:!1,defaultValue:"",link:"style.Font.Style"},foreColor:{type:"color",visible:!0,readonly:!1,defaultValue:"",link:"style.Color"},lineHeight:{type:"string",visible:!0,readonly:!1,defaultValue:""},backStyle:{type:"select",visible:!0,readonly:!1,defaultValue:"",values:$waiReport.const.defPropSelectValues.fillStyle},backColor:{type:"color",visible:!0,readonly:!1,defaultValue:"",link:"style.bgColor"},verticalAlign:{type:"select",visible:!0,readonly:!1,defaultValue:"",link:"style.vAlign",values:$waiReport.const.defPropSelectValues.verticalAlign},alignment:{type:"select",visible:!0,readonly:!1,defaultValue:"",link:"style.Align",values:$waiReport.const.defPropSelectValues.alignment},wordWrap:{type:"select",visible:!0,readonly:!1,defaultValue:"",link:"style.wordWrap",values:$waiReport.const.defPropSelectValues.wordWrap},summaryType:{type:"select",visible:!0,readonly:!1,defaultValue:"",values:$waiReport.const.defPropSelectValues.sumType},summaryFunc:{type:"select",visible:!0,readonly:!1,defaultValue:"",values:$waiReport.const.defPropSelectValues.summaryFunc},summaryRunning:{type:"select",visible:!0,readonly:!1,defaultValue:"",values:$waiReport.const.defPropSelectValues.sumRunning},summaryGroup:{type:"string",visible:!0,readonly:!1,defaultValue:""},summaryDistinct:{type:"string",visible:!0,readonly:!1,defaultValue:""}},initialize:function(){Object.defineProperty(this,"Text",{get:function(){return this.text},set:function(e){console.log('    - Property.textbox.Text = "'+e+'"'),this.text=e}})},execDraw:function(e,t){var i=void 0!==this.dataField?(this.dataField+"").trim():"",r=void 0!==this.text?this.text:"",l=((void 0!==this.outputFormat?this.outputFormat:"")+"").trim(),a=!1;if(r=void 0!==this.Text?this.Text:r,""!==i){var o=i.toUpperCase().replace(/ /g,"");0==o.indexOf("=NOW()")?""!==l?(a=!0,r=(new Date).yrfFormat(l)):r=(new Date).yrfFormat($waiReport.const.defTextBoxNowFormat):0==o.indexOf("=DATE()")?""!==l?(a=!0,r=(new Date).yrfFormat(l)):r=(new Date).yrfFormat($waiReport.const.defTextBoxDateFormat):0==o.indexOf("=TIME()")?""!==l?(a=!0,r=(new Date).yrfFormat(l)):r=(new Date).yrfFormat($waiReport.const.defTextBoxTimeFormat):0==o.indexOf("=TEST()")?r="Multi-lines test string\nline2\nline3\nline4":o.indexOf("=SYSVALUE(")>=0||void 0!==t&&(r=void 0!==t[i]?t[i]+"":"")}this.ctrlOpt.borderOff.top=!1,this.ctrlOpt.borderOff.left=!1,this.ctrlOpt.borderOff.bottom=!1,this.ctrlOpt.borderOff.right=!1;try{r.indexOf("&brdTopNone;")>=0&&(r=r.replace(/&brdTopNone;/gi,""),this.ctrlOpt.borderOff.top=!0)}catch(e){}try{r.indexOf("&brdLeftNone;")>=0&&(r=r.replace(/&brdLeftNone;/gi,""),this.ctrlOpt.borderOff.left=!0)}catch(e){}try{r.indexOf("&brdBottomNone;")>=0&&(r=r.replace(/&brdBottomNone;/gi,""),this.ctrlOpt.borderOff.bottom=!0)}catch(e){}try{r.indexOf("&brdRightNone;")>=0&&(r=r.replace(/&brdRightNone;/gi,""),this.ctrlOpt.borderOff.right=!0)}catch(e){}if(!a&&""!==(r+="")&&""!==l)if(l.indexOf("0")>=0){var s=!1,n=0,d=l.lastIndexOf("#");d>=0&&(s=!0,l=l.substr(d+1,l.length-d));var f=l.lastIndexOf(".");f>=0&&(n=l.length-1-f);var p="0.00";try{var c=r.replace(/ |,/g,"");r=(p=(p=parseFloat(c)).toFixed(n))+""}catch(e){p="NaN"}if(p+""!="NaN"){var u="",y="",h=r.indexOf(".");if(n>0)if(h>0){u=(r.substr(0,h)+"").trim();for(var g=r.substr(h+1,n).trim(),v=g.length;v<n;v++)g+="0";y="."+g}else if(0==h)u="0",y=("."+r.substr(h+1,n)).trim();else{u=r,y=".";for(var b=0;b<n;b++)y+="0"}else u=h>0?(r.substr(0,h)+"").trim():r;if(u=u.replace(/,/g,""),s){for(var m=0,w="",x=u.length-1;x>=0;x--)w=u[x]+w,3==++m&&x>0&&(m=0,w=","+w);u=w}r=(r=u+y).replace(/-,/g,"-")}}else if(l.indexOf("#")>=0){for(var R=l,T=new Array,O=0,F=0;F<R.length;F++)-1=="#".indexOf(R[F])?(T.push([O,R[F]]),O=0):O++;var S="",V=0;for(F=0;F<T.length;F++)S+=r.substr(V,T[F][0])+T[F][1],V+=T[F][0];r.length>V&&(S+=r.substring(V,r.length)),r=S}else{var $=l.toLowerCase();$.search(/y|m|d/)>=0?r=$waiReport.rtl.functions.dateStrToFormat(r,$):$.search(/h|n|s/)>=0&&(r=$waiReport.rtl.functions.timeStrToFormat(r,l))}if("1"==(void 0===this.backStyle?"0":this.backStyle)){var N=this.style.bgColor;if(void 0!==N&&""!==N){e.save(),e.fillStyle=N,e.fillRect(this.left+1,this.top+1,this.width-2,this.height-2),e.restore()}}var k={L:0,T:0,R:0,B:0};function L(e){var t=-1;t=void 0!==e&&""!==(e+"").trim()?e:-1;try{t=parseInt(t)}catch(e){t=-1}return t}k.L=L(this.paddingLeft),k.T=L(this.paddingTop),k.R=L(this.paddingRight),k.B=L(this.paddingBottom);k.L=k.L>=0?k.L:4,k.T=k.T>=0?k.T:4,k.R=k.R>=0?k.R:4,k.B=k.B>=0?k.B:4;var B=this.left+k.L,C=this.top+k.T,A=this.width-(k.L+k.R),P=this.height-(k.T+k.B),D=$waiReport.rtl.util.convCanvasFontStyle(this.style.cssText),W=""!==this.style.Align?(this.style.Align+"").toLowerCase():"left",H=""!==this.style.vAlign?(this.style.vAlign+"").toLowerCase():"top";switch(W+""){case"0":W="left";break;case"1":W="right";break;case"2":W="center"}switch(H+""){case"0":H="top";break;case"1":H="middle";break;case"2":H="bottom"}e.save(),e.textAlign=W,e.textBaseline=H,e.font=D,e.fillStyle=""!==this.style.Color?this.style.Color:"#000000";var I=$waiReport.rtl.util.getTextStartX(W,B,A),z=$waiReport.rtl.util.getTextStartY(H,C,P);if("nowrap"==(this.style.wordWrap+"").trim().toLowerCase()||""==(this.style.wordWrap+"").trim()&&"nowrap"==$waiReport.const.defaultTextboxStyle.wordWrap){for(var E=r+"",M=E,U=E.length,Y=e.measureText(M).width;Y>A;){if(0==--U){M=E.substr(0,1)+"...";break}M=E.substr(0,U)+"...",Y=e.measureText(M).width}e.fillText(M,I,z)}else{var j=r+"";if(j=j.replace(/(\\r\\n|\\n)/gi,"\n"),(r+"").split(" ").length>1||j.split("\n").length>1){var G=this.Font.Size;G=""==(G+"").trim()?parseInt($waiReport.const.defFontSize):parseInt(G)*$waiReport.const.fontScale;try{var X=void 0===this.lineHeight?$waiReport.const.defLineHeightPercent:""!==(this.lineHeight+"").trim()?parseFloat((this.lineHeight+"").trim()):$waiReport.const.defLineHeightPercent;G*=X=NaN===X||X<=0?$waiReport.const.defLineHeightPercent:X}catch(e){}$waiReport.rtl.util.wrapFillText(e,r+"",I,C,A,P,G)}else e.fillText(r+"",I,z)}e.restore()}};$waiReport.core.addComponentBase(e)}();