!function(){var e={declare:{type:"image",default:{}},properties:{data:{type:"image",visible:!0,readonly:!1,defaultValue:"",link:"imageData",propChange:!1},backStyle:{type:"select",visible:!0,readonly:!1,defaultValue:"",values:$waiReport.const.defPropSelectValues.fillStyle},backColor:{type:"color",visible:!0,readonly:!1,defaultValue:""},lineStyle:{type:"select",visible:!0,readonly:!1,defaultValue:"",values:$waiReport.const.defPropSelectValues.lineStyle},lineWeight:{type:"strInt",visible:!0,readonly:!1,defaultValue:"1"},lineColor:{type:"color",visible:!0,readonly:!1,defaultValue:"black"},pictureAlignment:{type:"select",visible:!0,readonly:!1,defaultValue:"",values:$waiReport.const.defPropSelectValues.imgAlign},sizeMode:{type:"select",visible:!0,readonly:!1,defaultValue:"",values:$waiReport.const.defPropSelectValues.imgSize},zoomRatio:{type:"float",visible:!0,readonly:!1,defaultValue:0}},initialize:function(){var e=this;this.image=null;for(var t=this;null!==t.parent&&"yrReportClass"!==t.classType;)t=t.parent;for(var a=t.prevLoadedImages,i=0;i<a.length;i++)if(a[i].name===this.name){this.image=a[i].img;break}null==this.image&&(this.image=new Image,void 0!==this.data&&""!==this.data.trim()&&(this.image.src=this.data)),this.loadedImage=!0,Object.defineProperty(this,"imageData",{get:function(){return e.image.src},set:function(t){e.data=t,e.image.src=t,e.image.onload=function(){e.loadedImage=!0,e.band.reDraw(!0)}}})},execDraw:function(e){var t=this,a=t.left,i=t.top,l=t.width,o=t.height,h=t.lineStyle,r=Number(t.lineWeight),s=$waiReport.rtl.util.int2color(t.lineColor),n=void 0===this.backStyle?"0":this.backStyle,d=$waiReport.rtl.util.int2color(t.backColor);e.save(),void 0!==h&&"0"!==h?(e.setLineDash({1:[],2:[6,3],3:[2,2],4:[6,3,2,3],5:[6,3,2,3,2,3]}[h]),e.lineWidth=NaN===r?1:r,e.strokeStyle=""===s?"#000000":s):(e.setLineDash([]),e.lineWidth=1,e.strokeStyle="rgba(0,0,0,0)");var g={l:a,t:i,w:l,h:o};e.beginPath(),e.setLineDash([0]),e.moveTo(g.l,g.t),e.lineTo(g.l+g.w,g.t),e.lineTo(g.l+g.w,g.t+g.h),e.lineTo(g.l,g.t+g.h),e.lineTo(g.l,g.t),e.closePath(),"1"==n&&(e.fillStyle=""===d?"rgba(0,0,0,0)":d,e.fill()),e.stroke(),e.restore();var c=parseInt((void 0===this.pictureAlignment?"2":this.pictureAlignment).trim()),m=void 0===this.sizeMode?"0":this.sizeMode;!0!==this.loadedImage?(this.image.onerror=function(){e.fillStyle="#FF0000",e.textAlign="center",e.textBaseline="middle",e.font=Math.min(l,o)-Math.min(l,o)/1.8+"px Tahoma",e.fillText("Not image-data for web",a+l/2,i+o/2,l),t.updateCanvas({})},void 0!==this.data&&""!==this.data.trim()&&(this.image.src=this.data)):function(){var h=0,r=0,s=t.image.width,n=t.image.height,d=a,g=i,u=t.image.width,f=t.image.height;if("0"==m){switch(c){case 0:break;case 1:s>l?h+=s-l:d=a+l-s;break;case 2:s>l?h+=Math.floor((s-l)/2):d=a+Math.floor((l-s)/2),n>o?r+=Math.floor((n-o)/2):g=i+Math.floor((o-n)/2);break;case 3:n>o?r+=n-o:g=i+o-n;break;case 4:s>l?h+=s-l:d=a+l-s,n>o?r+=n-o:g=i+o-n}s>l&&(s=l,u=l),n>o&&(n=o,f=o),e.drawImage(t.image,h,r,s,n,d,g,u,f)}else if("1"==m)e.drawImage(t.image,h,r,s,n,a,i,l,o);else if("2"==m)if(null==t.zoomRatio||t.zoomRatio<=0){var w=l/s,p=o/n,b=Math.min(w,p),v=(l-s*b)/2,y=(o-n*b)/2;switch(c){case 0:v>0&&(v=0),y>0&&(y=0);break;case 1:v>0&&(v+=v),y>0&&(y=0);break;case 3:v>0&&(v=0),y>0&&(y+=y);break;case 4:v>0&&(v+=v),y>0&&(y+=y)}e.drawImage(t.image,h,r,s,n,a+v,i+y,s*b,n*b)}else{var k=t.zoomRatio,S=document.createElement("canvas"),V=S.getContext("2d"),I={width:s*k,height:n*k};S.width=I.width,S.height=I.height,V.drawImage(t.image,0,0,I.width,I.height);var R=0,M=0,z=l,C=o;switch(null==c?2:c){case 0:l>I.width?(R=0,z=I.width):(R=0,z=l),o>I.height?(M=0,C=I.height):(M=0,C=o);break;case 1:l>I.width?(R=0,z=I.width):(R=I.width-l,z=l),o>I.height?(M=0,C=I.height):(M=0,C=o);break;case 2:l>I.width?(R=0,z=I.width):(R=(I.width-l)/2,z=l),o>I.height?(M=0,C=I.height):(M=(I.height-o)/2,C=o);break;case 3:l>I.width?(R=0,z=I.width):(R=0,z=l),o>I.height?(M=0,C=I.height):(M=I.height-o,C=o);break;case 4:l>I.width?(R=0,z=I.width):(R=I.width-l,z=l),o>I.height?(M=0,C=I.height):(M=I.height-o,C=o)}switch(v=(l-z)/2,y=(o-C)/2,c){case 0:v>0&&(v=0),y>0&&(y=0);break;case 1:v>0&&(v+=v),y>0&&(y=0);break;case 3:v>0&&(v=0),y>0&&(y+=y);break;case 4:v>0&&(v+=v),y>0&&(y+=y)}e.drawImage(S,R,M,z,C,a+v,i+y,z,C)}}()}};$waiReport.core.addComponentBase(e)}();