!function(){$waiReport.rtl.measure=new function(){this.divPixel=5,this.rm2yrPixel=function(t){rt=Math.floor(t/this.divPixel)}};$waiReport.rtl.util=new function(){this.convCanvasFontStyle=function(t){var e={},r="",n=$waiReport.const.defFontSize,i="Arial";if(""!=(t+"").trim()){var o,a=(t+"").trim().split(";");for(o=0;o<a.length;o++)if(""!=(a[o]+"").trim()){var s=(a[o]+"").trim().split(":");if(2==s.length){var l=(s[1]+"").trim();""!==l&&(e[(s[0]+"").trim().toLowerCase()]=l)}}function u(t){return void 0!==e[t]?e[t]:""}var f=u("font-weight"),h=u("font-style"),c=u("font-size"),v=u("font-family");""!==c&&(c=parseInt(c)*$waiReport.const.fontScale+"px"),r=(f+" "+h).trim(),n=""!==c?c:n,i=""!==v?v:i}return""!==r&&(r+=" "),r+n+" "+i},this.wrapFillText=function(t,e,r,n,i,o,a){for(var s=e+"",l=(s=s.replace(/(\\r\\n|\\n)/gi,"\n")).split("\n"),u="",f=[],h=n,c=0;c<l.length;c++){for(var v=[],g=l[c].split(" "),d=0;d<g.length;d++)v.push(g[d]);for(var p=0;p<v.length;p++){var m=u+v[p]+" ";t.measureText(m).width>i&&p>0?(f.push(u),u=v[p]+" "):u=m}f.push(u),u=""}var y=(t.textBaseline+"").toLowerCase(),S=a*f.length;"middle"==y?h=n+Math.floor((o-S)/2+a/2):"bottom"==y&&(h=n+o-a*(f.length-1));for(var R=0;R<f.length;R++)t.fillText(f[R],r,h,i),h+=a},this.getTextStartX=function(t,e,r){var n=e;return"right"==t?n=e+r:"center"==t&&(n=Math.floor(e+r/2)),n},this.getTextStartY=function(t,e,r){var n=e;return"bottom"==t?n=e+r:"middle"==t&&(n=Math.floor(e+r/2)),n},this.int2color=function(t){var e="";if(void 0!==t){if("string"==typeof t&&parseInt(t.trim())+""=="NaN")return t;var r="number"!=typeof t?parseInt(t):t;if(NaN!==r)try{var n=function(t,e){var r=Number(t).toString(16);for(e=null==e?e=2:e;r.length<e;)r="0"+r;return r}(r,6),i=n.substr(0,2),o=n.substr(2,2);e="#"+n.substr(4,2)+o+i}catch(t){e=""}}return e},this.checkLinePoint=function(t,e,r,n){for(var i=e.x-t.x,o=e.y-t.y,a=Math.min(1,Math.abs(i/o)||0),s=Math.min(1,Math.abs(o/i)||0),l=i/-Math.abs(i)*-1||1,u=o/-Math.abs(o)*-1||1,f=t.x*l+i*l,h=t.y*u+o*u,c=new function(t,e){this.x=t,this.y=e}(t.x,t.y),v=0,g=0;c.x*l<f||c.y*u<h;){if(c.x-n/2<=r.x&&c.x+n/2>=r.x&&c.y-n/2<=r.y&&c.y+n/2>=r.y)return!0;v+=a*l,Math.abs(v)>.5&&(c.x+=l,v+=1*-l),g+=s*u,Math.abs(g)>.5&&(c.y+=u,g+=1*-u)}return!1}};$waiReport.rtl.drawing=new function(){var t=null,e={zoom:2,selRectSize:6,selRectBG:"rgba(150,150,200,0.05)",selRectStyle1:"#ffffff",selRectStyle2:"#3399ff",MoveSizeBG:"rgba(200,100,100,0.05)",MoveSizeStyle:{width:2,color:"#FFFFFF",dash:[4,4]},selAreaRectStyle:"rgba(255,0,0,0.9)",selAreaRectDash:[4,4],gridModeRectStyle:"rgba(0,255,12,0.90)",gridModeLineStyle:"rgba(0,255,100,0.80)"};this.clear=function(){if(null===t)return!1;t.getContext("2d").clearRect(0,0,t.width,t.height)},this.getResizePoint=function(t){var e=[];return e.push([t[0],t[1]]),e.push([t[0]+t[2],t[1]]),e.push([t[0],t[1]+t[3]]),e.push([t[0]+t[2],t[1]+t[3]]),e.push([t[0],t[1]+t[3]/2]),e.push([t[0]+t[2],t[1]+t[3]/2]),e.push([t[0]+t[2]/2,t[1]]),e.push([t[0]+t[2]/2,t[1]+t[3]]),e},this.drawSelectRect=function(r,n){if(null===t)return!1;var i=t.getContext("2d"),o=e.selRectSize*e.zoom;i.save();for(var a=0;a<r.length;a++){var s=r[a],l=s[0]-o/2,u=s[1]-o/2;void 0!==n&&""!==e.selRectBG&&(i.fillStyle=e.selRectBG,i.fillRect(n[0],n[1],n[2],n[3])),i.fillStyle=e.selRectStyle1,i.fillRect(l,u,o,o),i.fillStyle=e.selRectStyle2,i.fillRect(l+1,u+1,o-2,o-2)}i.restore()},this.drawSelect=function(t){var e=this.getResizePoint(t);this.drawSelectRect(e,t)},this.checkResizeRect=function(t,r,n){for(var i=-1,o=this.getResizePoint(t),a=e.selRectSize*e.zoom,s=0;s<o.length;s++){var l=o[s],u=l[0]-a/2,f=l[1]-a/2,h=l[0]+a/2,c=l[1]+a/2;if(u<=r&&h>=r&&f<=n&&c>=n){i=s;break}}return i},this.drawSelLine=function(t){var e=[];e.push(t[0],t[1]),e.push(t[2],t[3]),this.drawSelectRect(e)},this.drawMRRect=function(r){if(null===t)return!1;var n=t.getContext("2d");n.save(),""!==e.MoveSizeBG&&(n.fillStyle=e.MoveSizeBG,n.fillRect(r[0],r[1],r[2],r[3])),n.strokeStyle=e.MoveSizeStyle.color,n.lineWidth=e.MoveSizeStyle.width,n.setLineDash(e.MoveSizeStyle.dash),n.beginPath(),n.translate(n.lineWidth/2,n.lineWidth/2),n.moveTo(r[0],r[1]),n.lineTo(r[0]+r[2],r[1]),n.lineTo(r[0]+r[2],r[1]+r[3]),n.lineTo(r[0],r[1]+r[3]),n.lineTo(r[0],r[1]),n.translate(0,0),n.stroke(),n.restore()},this.drawSelAreaRect=function(r,n,i){if(null===t)return!1;var o=t.getContext("2d");o.save(),o.strokeStyle=void 0!==n?n:e.selAreaRectStyle,o.setLineDash(void 0!==i?i:e.selAreaRectDash),o.lineWidth=2,o.beginPath(),o.moveTo(r[0],r[1]),o.lineTo(r[2],r[1]),o.lineTo(r[2],r[3]),o.lineTo(r[0],r[3]),o.lineTo(r[0],r[1]),o.stroke(),o.restore()},this.drawGridModeRect=function(r,n,i){if(null===t)return!1;var o=t.getContext("2d");o.save(),o.fillStyle=void 0!==i?i:e.gridModeRectStyle,o.strokeStyle=void 0!==i?i:e.gridModeLineStyle,o.lineWidth=1;for(var a=1,s=1,l=r[0];l<r[2];l+=n){s=1;for(var u=r[1];u<r[3];u+=n){if(a%10==0){if(1==s){o.beginPath(),o.setLineDash([]),o.moveTo(l,r[1]),o.lineTo(l,r[3]),o.stroke();break}}else if(a%5==0){if(1==s){o.beginPath(),o.setLineDash([8,8]),o.moveTo(l,r[1]),o.lineTo(l,r[3]),o.stroke();break}}else s%10==0?1==a&&(o.beginPath(),o.setLineDash([]),o.moveTo(r[0],u),o.lineTo(r[2],u),o.stroke()):s%5==0?1==a&&(o.beginPath(),o.setLineDash([8,8]),o.moveTo(r[0],u),o.lineTo(r[2],u),o.stroke()):o.fillRect(l-1,u-1,2,2);s++}a++}o.restore()},Object.defineProperty(this,"canvas",{get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"zoom",{get:function(){return e.zoom},set:function(t){e.zoom=t}}),Object.defineProperty(this,"sizeRect",{get:function(){return e.selRectSize},set:function(t){e.selRectSize=t}})};$waiReport.classes.eventCtrl=function(){var t=[];this.add=function(e,r,n,i){var o={name:e,obj:r,rect:n,func:i};t.push(o)},this.clear=function(){for(var e=0;e<t.length;e++)t[e].name="",t[e].obj=null,t[e].rect={},t[e].func=null;t=[]},this.onMouseEvent=null,this.doMouseEvent=function(e,r,n,i){for(var o=void 0!==n?n:r.offsetX,a=void 0!==i?i:r.offsetY,s=!0,l=t.length-1;l>=0;l--){var u=t[l].rect,f=void 0!==u.w?u.l+u.w:u.r,h=void 0!==u.h?u.t+u.h:u.b;u.l<=o&&f>=o&&u.t<=a&&h>=a&&(void 0!==t[l].func&&null!==t[l].func&&(s=t[l].func(e,r,o,a)),!1!==s&&void 0!==this.onMouseEvent&&null!==this.onMouseEvent&&(s=this.onMouseEvent(e,r,o,a,t[l])))}return s}};$waiReport.rtl.functions=new function(){Date.prototype.yrfFormat=function(t){if(!this.valueOf())return" ";var e=["sun","mon","tue","wed","thu","fri","sat"],r=this;return t.replace(/(yyyy|yy|mm|dd|E|HH|hh|nn|ss|am\/pm|a\/p)/gi,function(t){switch(t){case"yyyy":return r.getFullYear();case"yy":return(r.getFullYear()%1e3).zf(2);case"mm":return(r.getMonth()+1).zf(2);case"dd":return r.getDate().zf(2);case"E":return e[r.getDay()];case"HH":return r.getHours().zf(2);case"hh":return((h=r.getHours()%12)?h:12).zf(2);case"nn":return r.getMinutes().zf(2);case"ss":return r.getSeconds().zf(2);case"a/p":case"am/pm":return r.getHours()<12?"am":"pm";default:return t}})},String.prototype.string=function(t){for(var e="",r=0;r++<t;)e+=this;return e},String.prototype.zf=function(t){return"0".string(t-this.length)+this},Number.prototype.zf=function(t){return this.toString().zf(t)},this.dateStrToFormat=function(t,e){var r,n="",i=(t+"").trim(),o="",a="",s="",l="",u="",f="",h="",c=null;if(8==i.length||10==i.length){for(10==i.length&&(i=i.replace(/\/|-| /g,"")),o=($waiReport.const.defaultDateValueFormat+"").trim().toUpperCase(),r=0;r<o.length;r++)i.length>r&&("Y"==o[r]?a+=i[r]:"M"==o[r]?s+=i[r]:"D"==o[r]&&(l+=i[r]));(c=new Date(a+"-"+s+"-"+l+"T00:00:00"))+""!="Invalid Date"&&(n=c.yrfFormat(e))}else if(i.length>=14){for(i.length>14&&(i=i.replace(/\/|-|:|\.| /g,"")),o=($waiReport.const.defaultDateValueFormat+"").trim().toUpperCase()+($waiReport.const.defaultTimeValueFormat+"").trim().toUpperCase(),r=0;r<o.length;r++)i.length>r&&("Y"==o[r]?a+=i[r]:"M"==o[r]?s+=i[r]:"D"==o[r]?l+=i[r]:"H"==o[r]?u+=i[r]:"N"==o[r]?f+=i[r]:"S"==o[r]&&(h+=i[r]));(c=new Date(a+"-"+s+"-"+l)).setHours(parseInt(u),parseInt(f),parseInt(h)),c+""!="Invalid Date"&&(n=c.yrfFormat(e))}return""==n&&(n="[Invalid Date]"),n},this.timeStrToFormat=function(t,e){var r="",n=(t+"").trim(),i="",o="",a="",s="",l="",u=null;if(6==n.length)for(i=($waiReport.const.defaultTimeValueFormat+"").trim().toUpperCase(),o=0;o<i.length;o++)n.length>o&&("H"==i[o]?a+=n[o]:"N"==i[o]?s+=n[o]:"S"==i[o]&&(l+=n[o])),(u=new Date).setHours(parseInt(a),parseInt(s),parseInt(l)),u+""!="Invalid Date"&&(r=u.yrfFormat(e));return""==r&&(r="[Invalid Time]"),r}}}();